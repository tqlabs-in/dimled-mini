var e=`:root{--bg:#121212;--card:#1e1e1e;--primary:#00bcd4;--text:#eee;--sub:#aaa;--off:#f44336;--on:#4caf50}*{box-sizing:border-box;margin:0;padding:0}body{background:var(--bg);color:var(--text);grid-template-rows:auto 1fr auto;min-height:100dvh;font-family:system-ui,sans-serif;display:grid}:is(header,footer){letter-spacing:2px;color:var(--sub);text-align:center;padding-block:20px;font:700 .75rem sans-serif}:is(header,footer) a{color:var(--primary);text-decoration:none}main{flex-direction:column;align-items:center;gap:20px;padding-inline:20px;display:flex}.card{background:var(--card);border-radius:20px;width:min(100%,340px);padding:25px;box-shadow:0 10px 30px #0008}.card .card__title{font:600 1.4rem sans-serif}.card .card__header,.card .row{justify-content:space-between;align-items:center;margin-bottom:25px;display:flex}.status{aspect-ratio:1;background:var(--off);border-radius:50%;width:12px}.status.connected{background:var(--on)}label{color:var(--sub);font-size:1rem}.toggle{border-radius:34px;width:48px;height:26px;position:relative;overflow:hidden}.toggle input{opacity:0;width:0;height:0}.toggle__slider{cursor:pointer;background:#444;border-radius:34px;transition:all .3s;position:absolute;inset:0}.toggle__slider:before{content:"";aspect-ratio:1;background:#fff;border-radius:50%;transition:all .3s;position:absolute;inset:3px auto 3px 3px}input:checked+.toggle__slider{background:var(--primary)}input:checked+.toggle__slider:before{transform:translate(22px)}input[type=range]{appearance:none;background:#444 linear-gradient(var(--primary),var(--primary))no-repeat 0/var(--percent,0%)100%;border-radius:99px;width:100%;height:12px;margin-block:10px 25px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#fff;border-radius:50%;width:22px;height:22px;box-shadow:0 2px 6px #0006}.btn{width:100%;color:inherit;background:#333;border:none;border-radius:12px;place-content:center;align-items:center;gap:8px;padding:15px;font:600 1rem sans-serif;transition:all .2s;display:flex}.btn svg{fill:currentColor;width:20px;height:20px}:disabled,[disabled]{opacity:.5;cursor:not-allowed;filter:grayscale()}`;const t=(e,t,n={})=>{let r=document.querySelector(e),i=()=>{r.querySelectorAll(`[data-click],[data-input],[data-change]`).forEach(e=>{let t=e.dataset;t.click&&n[t.click]&&e.addEventListener(`click`,e=>n[t.click].call(n,e)),t.input&&n[t.input]&&e.addEventListener(`input`,e=>n[t.input].call(n,e)),t.change&&n[t.change]&&e.addEventListener(`change`,e=>n[t.change].call(n,e))})};return n.render=()=>{r.innerHTML=t(n),i()},n.render(),n};var n=`led_strip`,r=document.querySelector(`link[rel=icon]`);r&&(r.href=`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¨</text></svg>`);var i=document.createElement(`meta`);i.name=`viewport`,i.content=`width=device-width, initial-scale=1, user-scalable=no`,document.head.appendChild(i);var a=document.createElement(`style`);a.textContent=e,document.head.appendChild(a);var o={checkmark:`<svg viewBox="0 0 24 24"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>`,save:`<svg viewBox="0 0 24 24"><path d="M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>`},s=t(`body`,e=>`<header><h1>DIMLED MINI</h1></header><main> <div class="card"> <div class="card__header"> <h2 class="card__title">Light Strip</h2> <div class="status ${e.connected?`connected`:``}"></div> </div> <form> <div class="row"> <label>Power</label> <label class="toggle"> <input type="checkbox" ${e.on?`checked`:``} ${e.connected?``:`disabled`} data-change="toggle" /> <span class="toggle__slider" ${e.connected?``:`disabled`} ></span> </label> </div> <div class="row"> <label>Brightness</label> <span id="brightness-value" style="font-weight:bold;color:var(--primary)" ${e.connected?``:`disabled`} > ${e.percent}% </span> </div> <input type="range" min="0" max="255" value="${e.brightness}" style="--percent:${e.percent}%" ${e.connected?``:`disabled`} data-input="bright_input" data-change="bright_change" /> <button class="btn" ${e.connected||e.saved?``:`disabled`} data-click="save" > ${e.saved?`${o.checkmark} Saved`:`${o.save} Save State`} </button> </form> </div></main><footer> <span> Made with â¤ï¸ by <a href="https://github.com/tqlabs-in">TQLABS</a><sup>ğŸ‡®ğŸ‡³</sup> </span></footer>`,{connected:!1,on:!1,brightness:0,percent:0,saved:!1,toggle(e){this.on=e.target.checked,fetch(`/light/${n}/turn_${this.on?`on`:`off`}`,{method:`POST`})},bright_input(e){let t=e.target,n=t.valueAsNumber;this.percent=Math.round(n/255*100),t.style.setProperty(`--percent`,`${s.percent}%`),document.getElementById(`brightness-value`).textContent=`${s.percent}%`},bright_change(e){let t=e.target;fetch(`/light/${n}/turn_on?brightness=${t.value}`,{method:`POST`})},save(e){e.preventDefault(),fetch(`/button/save_state/press`,{method:`POST`}).then(e=>{e.ok&&(this.saved=!0,this.render(),setTimeout(()=>{this.saved=!1,this.render()},1500))})},render:void 0}),c=0,l=new EventSource(`/events`);l.addEventListener(`open`,()=>{c=Date.now(),s.connected=!0,s.render()}),l.addEventListener(`error`,()=>{s.connected=!1,s.render()}),l.addEventListener(`ping`,e=>{if(c=Date.now(),!e.data)return;let t=JSON.parse(e.data);t.title&&(document.title=t.title)}),l.addEventListener(`state`,e=>{c=Date.now();let t=JSON.parse(e.data);t.id===`light-${n}`&&(t.state&&(s.on=t.state===`ON`),t.brightness!=null&&(s.brightness=t.brightness,s.percent=Math.round(t.brightness/255*100)),s.render())}),setInterval(()=>{let e=Date.now()-c<15e3;e!==s.connected&&(s.connected=e,s.render())},5e3);